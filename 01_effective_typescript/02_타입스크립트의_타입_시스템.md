# 2장 타입스크립트의 타입 시스템

## 편집기를 사용하여 타입 시스템 탐색하기

타입스크립트를 설치하면, 다음 두 가지를 실행할 수 있습니다.

- 타입스크립트 컴파일러(tsc)
- 단독으로 실행할 수 있는 타입스크립트 서버(tsserver)

타입스크립트를 사용하는 주된 목적을 타입스크립트 컴파일러를 실행하는 것이지만, 타입스크립트가 '언어 서비스'를 제공한다는 점도 중요합니다. 타입스크립트 서버는 코드 자동 완성, 명세 검사, 검색, 리팩터링 기능을 가지고 있습니다. 보통 IDE를 통한 언어 서비스를 주로 사용하게 되는데, 타입스크립트 서버의 기능도 유용하니 공부해 보겠습니다.

IDE 별로 약간의 차이가 존재하지만 보통 심볼 위에 마우스 커서를 대면 타입스크립트가 해당 심볼의 타입을 어떻게 추론하고 있는지 표시됩니다. 타입스크립트가 추론한 타입과 실제 의도와 다른지 검토하는 과정은 타입 시스템을 연마하는 좋은 방법입니다.

아래 코드를 살펴보겠습니다.
```
function getElement(elOrId: string|HTMLElement|null) : HTMLElement {
    if (typeof elOrId === 'object') {
        return elOrId;
    } else if (elOrId === null) {
        return document.body;
    } else {
        const el = document.getElementById(elOrId);
        return el;
    }
}
```

타입 스크립트에 의해 아래 케이스에서 오류가 발생합니다.

- typeof elOrId === 'object' 분기에서 elOrId를 반환하는 경우
    - 자바스크립트에서 null 또한 object 타입이기 때문에 오류
- const el = document.getElementById(elOrId);
        return el;
    - document.getElementById의 반환 타입에 null이 포함되기 때문에 오류

## 타입이 값들의 집합이라고 생각하기

타입스크립트에서 변수들을 타입을 가지고 있고, 이때의 타입은 '할당 가능한 값들의 집합'이라고 표현할 수 있습니다.
예를 들어, 모든 숫자값의 집합을 number 타입이라고 생각할 수 있습니다.

```
type A = 'A'
type Twelve = 12
```
위처럼, 한 가지 값만 포함하는 '유닛' 혹은 '리터럴' 타입도 정의할 수 있습니다.

```
type AB = 'A' | 'B'
```
혹은 위처럼 타입을 묶어 '유니온' 타입을 만들 수도 있고, 이 경우 '할당 가능한 값들의 집합'의 '합집합'으로 사용하면 됩니다.

```
interface Person {
    name: string;
}

interface Lifespan {
    birth: Date;
    death: Data;
}

type PersonSpan = Person & Lifespan;
```
& 연산자는 두 타입의 교집합을 계산합니다. Person과 Lifespan 인터페이스는 공통으로 가지는 속성이 없기 때문에 PersonSpan 타입을 공집합(never 타입)으로 예상하기 쉬우나, 타입 연산자는 인터페이스의 속성이 아닌, 값의 집합에 적용됩니다. 그리고 추가적인 속성을 가지는 값도 여전히 그 타입에 속합니다. 따라서 PersonSpan은 Person과 Lifespan의 속성을 모두 가지는 타입이 됩니다.

```
cosnt ps: PersonSpan = {
    name: 'Alan Turing',
    birth: new Date('1912/06/23'),
    death: new Date('1954/06/07'),
}; // 정상
```

하지만 좀 더 일반적인 방법으로 PersonSpan을 정의하는 방법은 아래와 같습니다.

```
interface Person {
    name: string;
}

interface PersonSpan extends Person {
    birth: Date;
    death: Date;
}
```

