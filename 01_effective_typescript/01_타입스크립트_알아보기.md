# 1장 타입스크립트 알아보기

타입스크립트는 파이썬이나 루비 같은 인터프리터로 실행되는 언어가 아니며, 저수준 언어로 컴파일되지도 않습니다. 타입스크립트는 또 다른 고수준 언어인 자바스크립트로 컴파일되며, 자바스크립트로 실행이 이루어집니다.

## 타입스크립트의 설정

타입스크립트는 다양한 설정을 가지고 있습니다. 이 설정들은 커맨드라인에서 사용할 수도 있고, tsconfig.json을 통해서 조작하는 것도 가능합니다(tsconfig.json를 이용한 조작이 권장됩니다).

우선 처음 배워볼 속성으로 noImplicityAny와 strictNullChecks가 있습니다.

- noImplicityAny: 변수들이 미리 정의된 타입을 가져야 하는지 여부를 제어
- strictNullChecks: null과 undefiend가 모든 타입에서 허용되는지 확인

## 코드 생성과 타입이 관계없음을 이해하기

타입스크립트의 컴파일러는 크게 두 가지 역할을 수행합니다.

- 최신 타입스크립트/자바스크립트를 브라우저에서 동작할 수 있도록 구버전의 자바스크립트로 트랜스파일
- 코드의 타입 오류를 체크

기억해야 할 점은, 이 두 동작이 독립적이라는 것입니다. 타입스크립트가 자바스크립트로 변환될 때, 타입 체크는 영향을 끼치지 않으며 자바스크립트 코드가 실행될 때 타입 체크가 영향을 주지 않습니다.

> 타입 체크에 문제가 있을 경우에는 자바스크립트 산출물이 생성되지 않도록 하고 싶을 경우, noEmitOnError 속성을 적용하면 됩니다.

### 런타임에는 타입 체크가 불가합니다.

```
interface Square {
    with: number;
}

interface Rectangle extends Square {
    height: number;
}

type Shape = Square | Rectangle

function calculate(shape: Shape) {
    if (shape instanceof Rectangle) {
        
    }
}
```

위 코드의 의도는 명확해 보입니다. 하지만 실제로 이 코드를 자바스크립트로 변환하여 실행하면 오류가 발생합니다.

```
interface Square {
    with: number;
}

interface Rectangle extends Square {
    height: number;
}

type Shape = Square | Rectangle
```

위 부분들은 타입스크립트에서만 존재하는 코드입니다. 자바스크립트로 컴파일되는 과정에서 모두 제거되는 부분입니다. 따라서 자바스크립트에서 Rectangle은 접근이 불가능합니다.
Rectangle 타입에 대한 체크가 필요하다면, height 속성의 존재 여부를 확인하는 간단한 방법이 존재합니다.

```
interface Square {
    kind: 'Square';
    width: number;
}

interface Rectangle {
    kind: 'Rectangle';
    height: number;
    width: number;
}

type Shape = Square | Rectangle;

function calculate(shape: Shape) {
    if (shape.kind === 'Square') {
        
    }
}
```

태그된 유니온 기법을 사용하는 방법도 존재합니다. Square나 Rectangle 인터페이스는 사라지기 때문에, 자바스크립트 변환 시에도 사라지지 않는 문자열을 이용해 타입을 추론하는 방법입니다. 혹은, Square나 Rectangle을 클래스로 정의하여 값과 타입을 모두 사용할 수도 있습니다.

## 구조적 타이핑에 익숙해지기

자바스크립트는 본질적으로 덕 타이핑(duck typing) 기반입니다.

> 덕 타이핑이란, 객체가 어떤 타입에 부합하는 변수와 메서드를 가지고 있다면 객체를 해당 타입에 속하는 것으로 간주하는 방식입니다. "만약 어떤 새가 오리처럼 걷고, 헤엄치고, 꽥꽥거리는 소리를 낸다면 나는 그 새를 오리라고 부를 것이다."

```
interface Vector2D {
    x: number;
    y: number;
}

interface Vector3D {
    x: number;
    y: number;
    z: number;
}

function calculateLength(v: Vector2D) {
    return Math.sqrt(v.x * v.x + v.y * v.y);
}
```
2D, 3D 벡터 타입과 2D 벡터의 길이를 구하는 함수가 있습니다.

```
const myVector: Vector3D = { x: 3, y: 4, z: 5}
calculateLength(myVector);
```

calculateLength 함수에 3D 벡터인 myVector를 전달하면 정상적으로 25가 반환됩니다. 타입스크립트는 myVector 객체가 x, y를 가졌기 때문에 Vector2D와 호환된다고 판단했기 때문입니다.

### any 타입 지양하기

any 타입을 사용하면 타입스크립트를 사용하는 의미가 퇴색된다... 정도로만 알고 있었으나, any를 사용하면

- 자동완성 기능
- 도움말 기능
- Rename Symbol 기능

등 타입스크립트가 제공하는 부가 기능들의 사용도 불가능해 집니다.

